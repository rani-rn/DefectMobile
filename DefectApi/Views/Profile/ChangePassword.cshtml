@{
    ViewData["Title"] = "Change Password";
}

<h2 class="password-title">Change Password</h2>

<div class="password-container">
    <div class="password-card">
        <form method="post" class="password-form">
            <div class="form-group">
                <label for="currentPassword">Current Password</label>
                <div class="input-box">
                    <input name="currentPassword" placeholder="Current Password" type="password" required
                        id="currentPassword" />
                    <i class="bx bx-show" onclick="toggleVisibility('currentPassword', this)"
                        style="cursor: pointer;"></i>
                </div>
            </div>

            <div class="form-group">
                <label for="newPassword">New Password</label>
                <div class="input-box">
                    <input name="newPassword" placeholder="New Password" type="password" required id="newPassword" />
                    <i class="bx bx-show" onclick="toggleVisibility('newPassword', this)" style="cursor: pointer;"></i>
                </div>
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirm New Password</label>
                <div class="input-box">
                    <input name="confirmPassword" placeholder="Confirm New Password" type="password" required
                        id="confirmPassword" />
                    <i class="bx bx-show" onclick="toggleVisibility('confirmPassword', this)"
                        style="cursor: pointer;"></i>
                </div>
            </div>
            @if (!ViewData.ModelState.IsValid)
            {
                <div style="color:red; margin-bottom: 15px;">
                    @ViewData.ModelState.Values.SelectMany(v => v.Errors).FirstOrDefault()?.ErrorMessage
                </div>
            }
            @if (ViewBag.Success != null)
            {
                <p class="success-msg">@ViewBag.Success</p>
            }

            <button type="submit" class="btn btn-primary full-width">Update Password</button>
            <a asp-action="Index" class="btn btn-secondary full-width">Back to Profile</a>

        </form>
    </div>
</div>

<style>
    .password-title {
        font-size: 28px;
        color: #0f56af;
        text-align: center;
        margin-bottom: 20px;
    }

    .password-container {
        display: flex;
        justify-content: center;
        padding: 40px 20px;
    }

    .password-card {
        background-color: #fff;
        padding: 30px 40px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 400px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    label {
        font-weight: 600;
        display: block;
        margin-bottom: 5px;
    }

    .input-box {
        position: relative;
    }

    input {
        width: 100%;
        padding: 10px;
        padding-right: 40px;
        border: 1px solid #ccc;
        border-radius: 8px;
    }

    .input-box i {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 18px;
        color: #333;
    }

    .btn {
        display: block;
        text-align: center;
        padding: 10px;
        border-radius: 8px;
        text-decoration: none;
        color: white;
        font-weight: 500;
        margin-top: 10px;
    }

    .btn-primary {
        background-color: #0f56af;
    }

    .btn-primary:hover {
        background-color: #0c448c;
    }

    .btn-secondary {
        background-color: #6c757d;
    }

    .btn-secondary:hover {
        background-color: #5a6268;
    }

    .full-width {
        width: 100%;
    }

    .success-msg {
        color: green;
        margin-top: 15px;
        text-align: center;
        font-weight: 600;
    }

    .error-msg {
        color: red;
        margin-top: 15px;
        text-align: center;
        font-weight: 600;
    }
</style>

<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

<script>
    function toggleVisibility(id, icon) {
        const input = document.getElementById(id);
        if (input.type === "password") {
            input.type = "text";
            icon.classList.remove("bx-show");
            icon.classList.add("bx-hide");
        } else {
            input.type = "password";
            icon.classList.remove("bx-hide");
            icon.classList.add("bx-show");
        }
    }
</script>
